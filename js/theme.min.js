// fitvids to make all videos full width http://fitvidsjs.com/  
// (function(e){"use strict";e(function(){e(".the-content").fitVids()})})(jQuery);


document.addEventListener("DOMContentLoaded", function () {
  // همه childrenها به صورت پیش‌فرض بسته باشن
  document.querySelectorAll(".comment-list .children").forEach(function(childrenElem) {
    childrenElem.classList.add("collapsed");
  });

  // اضافه کردن کلاس has-children فقط در صورت داشتن li
  document.querySelectorAll('.comment-list .children').forEach(function(childrenElem) {
    if (childrenElem.querySelectorAll('li').length > 0) {
      childrenElem.classList.add('has-children');
    }
  });

  // هندل باز و بسته کردن با کلیک روی دکمه
  document.querySelectorAll(".toggle-children").forEach(function (btn) {
    btn.setAttribute("aria-expanded", "false");
    btn.textContent = "➕";

    btn.addEventListener("click", function () {
      const parent = btn.closest("li");
      const children = parent.querySelector(".children");
      if (!children) return;

      const isExpanded = btn.getAttribute("aria-expanded") === "true";
      children.classList.toggle("collapsed", isExpanded);
      btn.setAttribute("aria-expanded", (!isExpanded).toString());
      btn.textContent = isExpanded ? "➕" : "➖";
    });
  });
});
